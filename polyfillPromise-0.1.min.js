(function(){var l,b;this.Promise&&"function"==typeof this.Promise&&(l=new this.Promise(function(){}));l&&this.Promise.all&&this.Promise.race&&this.Promise.reject&&this.Promise.resolve&&l.then&&l["catch"]?(l=null,b=this.Promise):(b=function a(d){var c=this,e=[],f,n=[],h,g="pending",k,m=function(b){f=arguments;for(var a=0;a<n.length;a++)n[a].apply(c,f);g="rejected"},l=function(a){h=arguments;for(var b=0;b<e.length;b++)e[b].apply(c,h);g="fulfilled"};if("function"===typeof d)try{d(l,m)}catch(q){g="rejected",
f=[q]}else throw Error("Promise argument "+d+" is not a function");c.then=function(d,k){if("fulfilled"===g&&"function"===typeof d)return a.resolve(d.apply(c,h));if("rejected"===g&&"function"===typeof k)return a.reject(k.apply(c,f));"function"===typeof k&&n.push(function(){thenResolver(k.apply(c,f))});"function"===typeof d&&e.push(function(){thenResolver(d.apply(c,h))});return new b(function(b){thenResolver=b})};c["catch"]=function(a){if("rejected"===g&&"function"===typeof a)return b.reject(a.apply(c,
f));if("fulfilled"===g)return b.resolve(h);"function"===typeof a&&n.push(function(){k(a.apply(c,f))});e.push(k);return new b(function(a){k=a})}},b.all=function(a){return new b(function(d,c){var e,f=[],l=0,h=a.length;(function k(m){var p=m;b.resolve(a[m]).then(function(a){f[p]=a;++l===h&&d(f)})["catch"](function(a){e||(e="rejected",c(a))});m<h-1&&k(++m)})(0)})},b.race=function(a){return new b(function(d,c){var e,f=a.length;(function h(g){b.resolve(a[g]).then(function(a){e||(e="fulfilled",d(a))})["catch"](function(a){e||
(e="rejected",c(a))});g<f-1&&h(++g)})(0)})},b.resolve=function(a){return a&&a.constructor&&"Promise"===a.constructor.name?a:a&&"function"===typeof a.then?new b(function(b,c){a.then(b,c)}):new b(function(b,c){b(a)})},b.reject=function(a){return new b(function(b,c){c(a)})});this.define&&this.define.amd&&"function"===typeof this.define?define([],function(){return b}):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=PolyFillPromise),exports.Promise=b):
this.Promise||(this.Promise=b)})();