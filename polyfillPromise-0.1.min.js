(function(){var c,b;this.Promise&&"function"==typeof this.Promise&&(c=new this.Promise(function(){}));c&&this.Promise.all&&this.Promise.race&&this.Promise.reject&&this.Promise.resolve&&c.then&&c["catch"]?(c=null,b=this.Promise):(b=function Promise(a){var e=this,k=[],d,l=[],g,f="pending",h,n=function(b){d=arguments;for(var a=0;a<l.length;a++)l[a].apply(e,d);f="rejected"},m=function(a){g=arguments;for(var b=0;b<k.length;b++)k[b].apply(e,g);f="fulfilled"};if("function"===typeof a)try{a(m,n)}catch(c){f="rejected",
d=[c]}else throw Error("Promise argument "+a+" is not a function");e.then=function(a,c){if("fulfilled"===f&&"function"===typeof a)return Promise.resolve(a.apply(e,g));if("rejected"===f&&"function"===typeof c)return Promise.reject(c.apply(e,d));"function"===typeof c&&l.push(function(){thenResolver(c.apply(e,d))});"function"===typeof a&&k.push(function(){thenResolver(a.apply(e,g))});return new b(function(a){thenResolver=a})};e["catch"]=function(a){if("rejected"===f&&"function"===typeof a)return b.reject(a.apply(e,
d));if("fulfilled"===f)return b.resolve(g);"function"===typeof a&&l.push(function(){h(a.apply(e,d))});k.push(h);return new b(function(a){h=a})}},b.constructor.name="Promise",b.all=function(a){return new b(function(e,k){var d,c=[],g=0,f=a.length;(function n(m){var p=m;b.resolve(a[m]).then(function(a){c[p]=a;++g===f&&e(c)})["catch"](function(a){d||(d="rejected",k(a))});m<f-1&&n(++m)})(0)})},b.race=function(a){return new b(function(e,c){var d,l=a.length;(function f(h){b.resolve(a[h]).then(function(a){d||
(d="fulfilled",e(a))})["catch"](function(a){d||(d="rejected",c(a))});h<l-1&&f(++h)})(0)})},b.resolve=function(a){return a&&a.constructor&&"Promise"===a.constructor.name?a:a&&"function"===typeof a.then?new b(function(b,c){a.then(b,c)}):new b(function(b,c){b(a)})},b.reject=function(a){return new b(function(b,c){c(a)})});this.define&&this.define.amd&&"function"===typeof this.define?define([],function(){return b}):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=
b),exports.Promise=b):this.Promise||(this.Promise=b)})();